---
import { events } from '../../data/events';
import Section from '../ui/Section.astro';
import { getLangFromUrl, useTranslations } from '../../i18n/utils';
import Button from '../ui/Button.astro';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<Section id="calendar" bg="background" class="py-16">
  <div class="max-w-4xl mx-auto space-y-6">
    {events.map((event, index) => (
      <div class="event-card bg-white p-6 md:p-8 rounded-2xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow duration-300 flex flex-col md:flex-row gap-6 items-start md:items-center">
        <div class="md:w-1/4 text-center md:text-left">
          <div class="text-primary font-bold text-xl mb-1">{event.date}</div>
          <div class="text-gray-500 text-sm">{event.time}</div>
        </div>
        
        <div class="flex-1">
          <div class="flex items-center gap-3 mb-2">
            <span class={`text-xs font-bold px-3 py-1 rounded-full ${
              event.type === 'Meetup' ? 'bg-green-100 text-green-600' :
              event.type === 'Workshop' ? 'bg-blue-100 text-blue-600' :
              event.type === 'WFC' ? 'bg-orange-100 text-orange-600' :
              'bg-purple-100 text-purple-600'
            }`}>
              {event.type}
            </span>
            <span class="text-xs text-gray-500 flex items-center gap-1">
              <svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
              {event.location}
            </span>
          </div>
          <h3 class="text-xl font-bold text-secondary-trust mb-2">{event.title}</h3>
          <p class="text-gray-600 text-sm">{t(event.desc as any)}</p>
        </div>
        
        <div class="w-full md:w-auto mt-4 md:mt-0">
          <Button 
            size="sm" 
            disabled={event.status !== 'Open'}
            class="w-full md:w-auto"
          >
            {event.status === 'Open' ? t('event.register') : t('event.soon')}
          </Button>
        </div>
      </div>
    ))}
  </div>
</Section>
