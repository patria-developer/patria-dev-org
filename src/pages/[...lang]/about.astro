---
import TeamList from '../../components/about/TeamList.astro'
import PageHeader from '../../components/ui/PageHeader.astro'
import { getLangFromUrl, useTranslations } from '../../i18n/utils'
import Layout from '../../layouts/Layout.astro'
import { getPageTitle } from '../../utils/sanity'

export async function getStaticPaths() {
  return [{ params: { lang: undefined } }, { params: { lang: 'en' } }]
}

const lang = getLangFromUrl(Astro.url)
const t = useTranslations(lang)
const pageTitle = await getPageTitle('about', lang)
---

<Layout title={pageTitle?.title?.[lang] || 'Patria Dev ID'}>
  <PageHeader title={t('team.title')} description={t('team.desc')} />
  <TeamList />
</Layout>

<script>
  import { gsap } from 'gsap'
  import { ScrollTrigger } from 'gsap/ScrollTrigger'

  gsap.registerPlugin(ScrollTrigger)

  // Team Cards
  const teamCards = gsap.utils.toArray('.team-card')
  teamCards.forEach((card) => {
    gsap.from(card as Element, {
      scrollTrigger: {
        trigger: card as Element,
        start: 'top bottom-=100',
        toggleActions: 'play none none reverse',
      },
      y: 50,
      opacity: 0,
      duration: 0.8,
      ease: 'back.out(1.2)',
    })
  })
</script>
