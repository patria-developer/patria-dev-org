---
import ContactForm from '../../components/about/ContactForm.astro';
import PageHeader from '../../components/ui/PageHeader.astro';
import { getLangFromUrl, useTranslations } from '../../i18n/utils';
import Layout from '../../layouts/Layout.astro';
import { getPageTitle } from '../../utils/sanity';

export async function getStaticPaths() {
  return [
    { params: { lang: undefined } },
    { params: { lang: 'en' } },
  ];
}

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const pageTitle = await getPageTitle('contact', lang);
---

<Layout title={pageTitle?.title?.[lang] || 'Patria Dev ID'}>
  <PageHeader 
    title={t('contact.title')} 
    description={t('contact.desc')} 
  />
  <ContactForm />
</Layout>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";
  
  gsap.registerPlugin(ScrollTrigger);

  // Contact Form
  gsap.from(".contact-container", {
    scrollTrigger: {
      trigger: ".contact-container",
      start: "top bottom-=100",
      toggleActions: "play none none reverse"
    },
    y: 50,
    opacity: 0,
    duration: 1,
    ease: "power3.out"
  });
</script>
